<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario</title>
    <link rel="stylesheet" th:href="@{/css/AgendarVisitas.css}">
</head>
<body>
<header class="main-header">
    <div class="logo-h">
        <span class="servi">Servi</span><span class="mark">Marketing</span>
    </div>
    <div class="center">Calendario</div>
    <div class="right">
        <div class="admin-label">Administrador</div>
    </div>
</header>

<!-- Sidebar -->
<aside class="sidebar">
    <div class="logo">
        <div>
            <h3>TechTracking</h3>
        </div>
    </div>
    <nav>
        <ul>
            <li class="sidebar-item" data-page="/admin">üë• Clientes</li>
            <li class="sidebar-item active" data-page="/admin/Visitas">üìÖ Calendario</li>
        </ul>
    </nav>
    <div class="sidebar-img">
        <img th:src="@{/img/smg.png}" alt="Logo">
    </div>
</aside>

<!-- Contenido principal -->
<main class="contenido">
    <!-- Encabezado -->
    <header class="header">
        <h2>Calendario</h2>
        <button id="btnCreate" class="btn-create">+ Crear</button>
    </header>

    <!-- Controles del calendario -->
    <div class="calendar-controls">
        <button id="btnPrev">‚óÄ</button>
        <h3 id="currentMonth"></h3>
        <button id="btnNext">‚ñ∂</button>
        <div class="view-options">
            <div class="filter-group">
                <button class="filter-btn">T√©cnico ‚åÑ</button>
                <div class="filter-menu">
                    <input type="text" id="filtroTecnico" placeholder="ID o nombre del t√©cnico...">
                </div>
            </div>
            <div class="filter-group">
                <button class="filter-btn">Estado ‚åÑ</button>
                <div class="filter-menu">
                    <select id="filtroEstado">
                        <option value="">Todos</option>
                        <option value="AGENDADA">Agendada</option>
                        <option value="INICIADA">Iniciada</option>
                        <option value="FINALIZADA">Finalizada</option>
                        <option value="REPROGRAMADA">Reprogramada</option>
                        <option value="CANCELADA">Cancelada</option>
                    </select>
                </div>
            </div>
            <div class="filter-group">
                <button class="filter-btn">Tipo ‚åÑ</button>
                <div class="filter-menu">
                    <select id="filtroTipo">
                        <option value="">Todos</option>
                        <option value="PREVENTIVO">Preventivo</option>
                        <option value="CORRECTIVO">Correctivo</option>
                    </select>
                </div>
             </div>
        </div>
        <div class="status-legend">
        <div class="legend-item">
            <span class="legend-color legend-iniciada"></span>
            En curso
        </div>
        <div class="legend-item">
            <span class="legend-color legend-finalizada"></span>
            Finalizada
        </div>
        <div class="legend-item">
            <span class="legend-color legend-cancelada"></span>
            Cancelada
        </div>
    </div>

    </div>

    <!-- Calendario -->
    <div class="calendar">
        <div class="day-name">LUN</div>
        <div class="day-name">MAR</div>
        <div class="day-name">MI√â</div>
        <div class="day-name">JUE</div>
        <div class="day-name">VIE</div>
        <div class="day-name">S√ÅB</div>
        <div class="day-name">DOM</div>

        <!-- Aqu√≠ se generar√°n los d√≠as con JS -->
        <div id="calendarBody" class="days"></div>
    </div>

    <!-- Modal para crear evento -->
    <div id="visitModal" class="modal-overlay hidden">
        <div>
            <button id="closeModal">&times;</button>
            <h3>Crear evento</h3>
            <form id="visitForm">
                <div>
                    <label for="cliente">Cliente:</label>
                    <select id="cliente" name="cliente" required>
                        <option value="">Seleccione un Cliente</option>
                    </select>
                </div>
                <div>
                    <label for="equipos">Equipos:</label>
                    <select id="equipos" name="equipos" required multiple style="height: 100px;">
                        <option value="">Seleccione equipos</option>
                    </select>
                </div>
                <div>
                    <label for="tecnico">T√©cnico:</label>
                    <select id="tecnico" name="tecnico" required>
                        <option value="">Seleccione un T√©cnico</option>
                    </select>
                </div>
                <div>
                    <label for="date">Fecha:</label>
                    <input type="date" id="date" name="date" required>
                </div>
                <div>
                    <label for="servicio">Tipo servicio:</label>
                    <select id="servicio" name="description">
                        <option value="PREVENTIVO">PREVENTIVO</option>
                        <option value="CORRECTIVO">CORRECTIVO</option>
                    </select>
                </div>
                <button type="submit">Guardar</button>
            </form>
        </div>
    </div>

    <!-- Modal para ver detalles de visita -->
    <div id="visitDetailModal" class="modal-overlay hidden">
        <div>
            <button id="closeDetailModal">&times;</button>
            <div id="detailContent">
                <!-- Aqu√≠ se cargar√°n los detalles din√°micamente -->
            </div>
        </div>
    </div>

    <div id="modalOpciones" class="modal" style="display:none;">
        <div class="modal-content">
            <button class="close-btn" onclick="cerrarModalOpciones()">&times;</button>
            <h3>Opciones de Visita</h3>
            <button onclick="cancelarDesdeModal()">Cancelar Visita</button>
            <button onclick="mostrarReprogramar()">Reprogramar Visita</button>

            <!-- Secci√≥n de reprogramar, inicialmente oculta -->
            <div id="seccionReprogramar" style="display:none; margin-top:10px;">
                <input type="date" id="nuevaFecha">
                <button onclick="enviarReprogramacion()">Guardar Nueva Fecha</button>
            </div>
        </div>
    </div>
</main>

<!-- JS -->
<script th:src="@{/js/AgendarVisitas.js}"></script>
</body>
</html>